#!/usr/bin/env python3
# vim: ft=python
# Small CLI calculator with full math support
# Usage:
#   calc 1+2*3
#   calc "sin(pi/2)"
#   calc "(2+3)**4 / 5"

import sys, math

if len(sys.argv) == 1:
    print("Usage: calc <expression>")
    sys.exit(1)

expr = " ".join(sys.argv[1:])

# Safety: restrict globals (only math builtins, no __import__)
safe_globals = {"__builtins__": None}
safe_locals = {k: v for k, v in math.__dict__.items()}

try:
    result = eval(expr, safe_globals, safe_locals)
    print(result)
except Exception as e:
    print(f"Error: {e}", file=sys.stderr)
    sys.exit(1)
